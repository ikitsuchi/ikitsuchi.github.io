<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OSPP | Magic Shop of Raspberry</title><meta name=keywords content><meta name=description content><meta name=author content="Ikitsu"><link rel=canonical href=https://ikitsu.moe/tags/ospp/><link crossorigin=anonymous href=/assets/css/stylesheet.e91dc76a19b4fbc91ebb20b1067401911ff7f55cfd1e2ccaa2fa1c4095273c92.css integrity="sha256-6R3Hahm0+8keuyCxBnQBkR/39Vz9HizKovocQJUnPJI=" rel="preload stylesheet" as=style><link rel=icon href=https://ikitsu.moe/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ikitsu.moe/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ikitsu.moe/favicon-32x32.png><link rel=apple-touch-icon href=https://ikitsu.moe/apple-touch-icon.png><link rel=mask-icon href=https://ikitsu.moe/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://ikitsu.moe/tags/ospp/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="OSPP"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://ikitsu.moe/tags/ospp/"><meta name=twitter:card content="summary"><meta name=twitter:title content="OSPP"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ikitsu.moe/ accesskey=h title="Magic Shop of Raspberry (Alt + H)">Magic Shop of Raspberry</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ikitsu.moe/about/ title=About><span>About</span></a></li><li><a href=https://ikitsu.moe/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://ikitsu.moe/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://ikitsu.moe/friends/ title=Friends><span>Friends</span></a></li><li><a href=https://ikitsu.moe/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://ikitsu.moe/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://ikitsu.moe/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://ikitsu.moe/>Home</a>&nbsp;»&nbsp;<a href=https://ikitsu.moe/tags/>Tags</a></div><h1>OSPP</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>OSPP 2022 日记</h2></header><div class=entry-content><p>7.3 (Day 0) 终于考完概率论了，可以不用再管加权了，可喜可贺。
今天摸了，明天再开工。
7.4 (Day 1) 早上起来赶火车，在火车上开始写了，复兴号还是很舒适的，信号也很稳定。
先做了读取配置文件的模块，这部分上网搜了一些资料后决定直接用 serde 做反序列化，因为我懒得自己写读取配置文件了，字符串处理太麻烦了 owo。
坐火车还是挺累的，随便写了点就休息了，打 FF14 去了（
7.5 (Day 2) 今天开始做读取仓库的模块。先开始写从仓库的 url 下载仓库的数据，然后用结构体存起来的功能。http 请求找了 reqwest 这个库，xml 解析找了很久库，最后用了 quick-xml，因为首先它性能不错，其次它支持用 serde 反序列化，很方便（
repomd.xml 解析的很顺利，然而 primary.xml 解析却报错说 “attribute key must be directly followed by = or space”，看了一下 primary.xml，格式明明非常正确，怎么会是呢。
然后看了眼 repomd.xml，直接下载的是 primary.xml.gz 不是 primary.xml，要先解压一下，这下谜底解开了！
找了 flate2 这个库把 gz 解压出来，然后解析 primary.xml 又报错了，这次是 “missing field”。原来是 xml 里有几个节点层级看错了，导致结构体写错了，反序列化不出来。调了好久，我都想笑了：）
晚上继续打 FF14 了，太美丽了艾欧泽亚！
7.6 (Day 3) 今天接着昨天做把 .repo 文件读进来的工作。感觉 .repo 的这个格式应该是 ini，继续找库，最开始找了个 config-rs，这个库看起来非常强大，然而它文档写太垃圾了我看不懂不会用（这个事情告诉我们要好好写文档），于是就用了另一个叫 configparser 的库。...</p></div><footer class=entry-footer><span title='2022-07-06 11:43:39 +0800 +0800'>July 6, 2022</span>&nbsp;·&nbsp;Ikitsu</footer><a class=entry-link aria-label="post link to OSPP 2022 日记" href=https://ikitsu.moe/posts/ospp-2022/></a></article></main><footer class=footer><span>&copy; 2022 <a href=https://ikitsu.moe/>Magic Shop of Raspberry</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>